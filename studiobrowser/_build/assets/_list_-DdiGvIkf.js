import{$,n as v,p as D,q,e as L,j as b,b as c,I as z,t as d,a as H,v as W,h as G,E as Q,S as X,w as Y,M as C,k as J}from"./web-ChLCkw3f.js";import{c as U,u as F}from"./index-default-CLtfLyKF.js";import{u as V,j as Z,h as x}from"./region-DRIfmh98.js";import{c as ee,a as te}from"./slot-19fuZfVi.js";import{c as ne,P as re}from"./PageTitle-DbHY_oqP.js";import{S as se}from"./SlotCard-BntUQKHJ.js";import"./index-eXjx59CY.js";import"./preload-helper-C9euoRAu.js";const N=Symbol("store-raw"),A=Symbol("store-node"),a=Symbol("store-has"),I=Symbol("store-self");function K(e){let t=e[$];if(!t&&(Object.defineProperty(e,$,{value:t=new Proxy(e,ie)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let s=0,o=n.length;s<o;s++){const l=n[s];r[l].get&&Object.defineProperty(e,l,{enumerable:r[l].enumerable,get:r[l].get.bind(t)})}}return t}function m(e){let t;return e!=null&&typeof e=="object"&&(e[$]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function O(e,t=new Set){let n,r,s,o;if(n=e!=null&&e[N])return n;if(!m(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let l=0,f=e.length;l<f;l++)s=e[l],(r=O(s,t))!==s&&(e[l]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const l=Object.keys(e),f=Object.getOwnPropertyDescriptors(e);for(let i=0,w=l.length;i<w;i++)o=l[i],!f[o].get&&(s=e[o],(r=O(s,t))!==s&&(e[o]=r))}return e}function p(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function _(e,t,n){if(e[t])return e[t];const[r,s]=L(n,{equals:!1,internal:!0});return r.$=s,e[t]=r}function oe(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===$||t===A||(delete n.value,delete n.writable,n.get=()=>e[$][t]),n}function M(e){D()&&_(p(e,A),I)()}function le(e){return M(e),Reflect.ownKeys(e)}const ie={get(e,t,n){if(t===N)return e;if(t===$)return n;if(t===v)return M(e),n;const r=p(e,A),s=r[t];let o=s?s():e[t];if(t===A||t===a||t==="__proto__")return o;if(!s){const l=Object.getOwnPropertyDescriptor(e,t);D()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(l&&l.get)&&(o=_(r,t,o)())}return m(o)?K(o):o},has(e,t){return t===N||t===$||t===v||t===A||t===a||t==="__proto__"?!0:(D()&&_(p(e,a),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:le,getOwnPropertyDescriptor:oe};function k(e,t,n,r=!1){if(!r&&e[t]===n)return;const s=e[t],o=e.length;n===void 0?(delete e[t],e[a]&&e[a][t]&&s!==void 0&&e[a][t].$()):(e[t]=n,e[a]&&e[a][t]&&s===void 0&&e[a][t].$());let l=p(e,A),f;if((f=_(l,t,s))&&f.$(()=>n),Array.isArray(e)&&e.length!==o){for(let i=e.length;i<o;i++)(f=l[i])&&f.$();(f=_(l,"length",o))&&f.$(e.length)}(f=l[I])&&f.$()}function T(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const s=n[r];k(e,s,t[s])}}function fe(e,t){if(typeof t=="function"&&(t=t(e)),t=O(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const s=t[n];e[n]!==s&&k(e,n,s)}k(e,"length",r)}else T(e,t)}function S(e,t,n=[]){let r,s=e;if(t.length>1){r=t.shift();const l=typeof r,f=Array.isArray(e);if(Array.isArray(r)){for(let i=0;i<r.length;i++)S(e,[r[i]].concat(t),n);return}else if(f&&l==="function"){for(let i=0;i<e.length;i++)r(e[i],i)&&S(e,[i].concat(t),n);return}else if(f&&l==="object"){const{from:i=0,to:w=e.length-1,by:j=1}=r;for(let g=i;g<=w;g+=j)S(e,[g].concat(t),n);return}else if(t.length>1){S(e[r],t,[r].concat(n));return}s=e[r],n=[r].concat(n)}let o=t[0];typeof o=="function"&&(o=o(s,n),o===s)||r===void 0&&o==null||(o=O(o),r===void 0||m(s)&&m(o)&&!Array.isArray(o)?T(s,o):k(e,r,o))}function ce(...[e,t]){const n=O(e||{}),r=Array.isArray(n),s=K(n);function o(...l){q(()=>{r&&l.length===1?fe(n,l[0]):S(n,l)})}return[s,o]}var ae=d("<div class=slot-grid>");function ue(e){const t=e.slots;return(()=>{var n=ae();return b(n,c(z,{each:t,children:r=>c(se,{get slot(){return r()}})})),n})()}var de=d("<span>Loading..."),ge=d("<span>No more data"),he=d("<div class=slot-list><button class=slot-list-load type=button>"),$e=d("<main>"),we=d("<div>Loading..."),ye=d("<h3>error! "),be=d("<span>Load more...");function Ae(e,t){switch(t){case"nick":default:return n=>te(e,n?.q||t,n)}}const E=ee(async(e,t,n,r={all:!1})=>{const s=Ae(e,t);if(r.all){const o=parseInt(n.offset||"0");let l=[];for(let f=0;f<=o;f++){const i=U(n);f>0?i.offset=`${f}`:delete i.offset,l=F(l,await s(i))}return l}return await s(n)},"page_list");function De(e){const t=V(),[n,r]=Z(),s=H(()=>x(t.region)),[o,l]=ce([]),f=()=>!!o.length,i=()=>parseInt(n.offset||"0"),[w,j]=L(i()),[g,P]=L(0),R=ne(async()=>{P(1);let y=0;if(!f())l(await E(s(),t.list,n,{all:!0}));else if(w()<i()){const u=await E(s(),t.list,n);u.length?(j(i()+1),l(F(o,u))):y=2}return P(y),o}),B=()=>{g()||(r({offset:w()+1},{replace:!0}),P(1))};return W(()=>{P(0)}),(()=>{var y=$e();return b(y,c(re,{children:"Studio Browser"}),null),b(y,c(J,{get fallback(){return we()},get children(){return c(Q,{fallback:u=>(()=>{var h=ye();return h.firstChild,b(h,()=>u.message,null),h})(),get children(){return c(X,{get when(){return R()},get children(){var u=he(),h=u.firstChild;return b(u,c(ue,{get slots(){return R()}}),h),h.$$click=B,b(h,c(Y,{get fallback(){return be()},get children(){return[c(C,{get when(){return g()===1},get children(){return de()}}),c(C,{get when(){return g()===2},get children(){return ge()}})]}})),u}})}})}}),null),y})()}G(["click"]);export{De as default};
