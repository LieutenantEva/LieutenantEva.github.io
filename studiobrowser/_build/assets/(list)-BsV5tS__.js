import{$ as h,v as K,w as C,x as ee,e as R,i as u,k as y,b as c,I as te,t as g,a as ne,q as j,h as re,E as se,S as oe,y as ie,M,r as le,n as ae}from"./web-D58qg4PS.js";import{c as B,u as z}from"./index-default-CLtfLyKF.js";import{u as ce,j as fe,h as ue}from"./region-bzFw8_t7.js";import{c as ge,a as de}from"./slot-BC_qnv5W.js";import{c as $e,P as he}from"./PageTitle-BiDq6I9b.js";import{S as be}from"./SlotCard-vaXyEpq0.js";import"./index-C5Kua--A.js";import"./preload-helper-C9euoRAu.js";const T=Symbol("store-raw"),_=Symbol("store-node"),f=Symbol("store-has"),W=Symbol("store-self");function G(e){let t=e[h];if(!t&&(Object.defineProperty(e,h,{value:t=new Proxy(e,we)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let s=0,o=n.length;s<o;s++){const i=n[s];r[i].get&&Object.defineProperty(e,i,{enumerable:r[i].enumerable,get:r[i].get.bind(t)})}}return t}function D(e){let t;return e!=null&&typeof e=="object"&&(e[h]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function O(e,t=new Set){let n,r,s,o;if(n=e!=null&&e[T])return n;if(!D(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,a=e.length;i<a;i++)s=e[i],(r=O(s,t))!==s&&(e[i]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let l=0,b=i.length;l<b;l++)o=i[l],!a[o].get&&(s=e[o],(r=O(s,t))!==s&&(e[o]=r))}return e}function N(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function m(e,t,n){if(e[t])return e[t];const[r,s]=R(n,{equals:!1,internal:!0});return r.$=s,e[t]=r}function ye(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===h||t===_||(delete n.value,delete n.writable,n.get=()=>e[h][t]),n}function Q(e){C()&&m(N(e,_),W)()}function _e(e){return Q(e),Reflect.ownKeys(e)}const we={get(e,t,n){if(t===T)return e;if(t===h)return n;if(t===K)return Q(e),n;const r=N(e,_),s=r[t];let o=s?s():e[t];if(t===_||t===f||t==="__proto__")return o;if(!s){const i=Object.getOwnPropertyDescriptor(e,t);C()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(o=m(r,t,o)())}return D(o)?G(o):o},has(e,t){return t===T||t===h||t===K||t===_||t===f||t==="__proto__"?!0:(C()&&m(N(e,f),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:_e,getOwnPropertyDescriptor:ye};function E(e,t,n,r=!1){if(!r&&e[t]===n)return;const s=e[t],o=e.length;n===void 0?(delete e[t],e[f]&&e[f][t]&&s!==void 0&&e[f][t].$()):(e[t]=n,e[f]&&e[f][t]&&s===void 0&&e[f][t].$());let i=N(e,_),a;if((a=m(i,t,s))&&a.$(()=>n),Array.isArray(e)&&e.length!==o){for(let l=e.length;l<o;l++)(a=i[l])&&a.$();(a=m(i,"length",o))&&a.$(e.length)}(a=i[W])&&a.$()}function X(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const s=n[r];E(e,s,t[s])}}function Se(e,t){if(typeof t=="function"&&(t=t(e)),t=O(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const s=t[n];e[n]!==s&&E(e,n,s)}E(e,"length",r)}else X(e,t)}function A(e,t,n=[]){let r,s=e;if(t.length>1){r=t.shift();const i=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)A(e,[r[l]].concat(t),n);return}else if(a&&i==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&A(e,[l].concat(t),n);return}else if(a&&i==="object"){const{from:l=0,to:b=e.length-1,by:x=1}=r;for(let d=l;d<=b;d+=x)A(e,[d].concat(t),n);return}else if(t.length>1){A(e[r],t,[r].concat(n));return}s=e[r],n=[r].concat(n)}let o=t[0];typeof o=="function"&&(o=o(s,n),o===s)||r===void 0&&o==null||(o=O(o),r===void 0||D(s)&&D(o)&&!Array.isArray(o)?X(s,o):E(e,r,o))}function Ae(...[e,t]){const n=O(e||{}),r=Array.isArray(n),s=G(n);function o(...i){ee(()=>{r&&i.length===1?Se(n,i[0]):A(n,i)})}return[s,o]}var Oe=g("<div class=slot-grid>");function me(e){const t=e.slots;return(()=>{var n=u(Oe);return y(n,c(te,{each:t,children:r=>c(be,{get slot(){return r()}})})),n})()}var Pe=g("<span>Loading..."),pe=g("<span>No more data"),ke=g("<div class=slot-list><!$><!/><button class=slot-list-load type=button>"),je=g("<main><!$><!/><!$><!/>"),De=g("<div>Loading..."),Ne=g("<h3>error! <!$><!/>"),Ee=g("<span>Load more...");function xe(e,t){switch(t){case"nick":default:return n=>de(e,n.q,n)}}const H=ge(async(e,t,n,r={all:!1})=>{n=B(n),delete n.cat;const s=xe(e,t);if(r.all){const o=parseInt(n.offset||"0");let i=[];for(let a=0;a<=o;a++){const l=B(n);a>0?l.offset=`${a}`:delete l.offset,i=z(i,await s(l))}return i}return await s(n)},"page_list");function Me(e){const t=ce(),[n,r]=fe(),s=ne(()=>ue(t.region)),[o,i]=Ae([]),a=()=>!!o.length,l=()=>parseInt(n.offset||"0"),[b,x]=R(l()),[d,L]=R(0),F=$e(async()=>{L(1);let $=0;if(!a())i(await H(s(),n.cat,n,{all:!0}));else if(b()<l()){const P=await H(s(),n.cat,n);P.length?(x(l()+1),i(z(o,P))):$=2}if(L($),!o||!a())throw new TypeError("Data is empty");return o}),Y=()=>{d()||(r({offset:b()+1},{replace:!0}),L(1))};return(()=>{var $=u(je),P=$.firstChild,[I,J]=j(P.nextSibling),U=I.nextSibling,[V,Z]=j(U.nextSibling);return y($,c(he,{children:"Studio Browser"}),I,J),y($,c(ae,{get fallback(){return u(De)},get children(){return c(se,{fallback:w=>(()=>{var S=u(Ne),p=S.firstChild,v=p.nextSibling,[k,q]=j(v.nextSibling);return y(S,()=>w.message,k,q),S})(),get children(){return c(oe,{get when(){return F()},get children(){var w=u(ke),S=w.firstChild,[p,v]=j(S.nextSibling),k=p.nextSibling;return y(w,c(me,{get slots(){return F()}}),p,v),k.$$click=Y,y(k,c(ie,{get fallback(){return u(Ee)},get children(){return[c(M,{get when(){return d()===1},get children(){return u(Pe)}}),c(M,{get when(){return d()===2},get children(){return u(pe)}})]}})),le(),w}})}})}}),V,Z),$})()}re(["click"]);export{Me as default};
