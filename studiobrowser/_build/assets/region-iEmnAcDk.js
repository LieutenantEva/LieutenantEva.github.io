import{H,a as T,g as ie,J as B,u as q,K as X,e as b,A as ue,o as z,G as le,L as fe,x as he,D as pe,b as de}from"./web-9koFeCQo.js";function _e(){let e=new Set;function t(s){return e.add(s),()=>e.delete(s)}let n=!1;function r(s,o){if(n)return!(n=!1);const a={to:s,options:o,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const i of e)i.listener({...a,from:i.location,retry:l=>{l&&(n=!0),i.navigate(s,{...o,resolve:!1})}});return!a.defaultPrevented}return{subscribe:t,confirm:r}}let j;function J(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),j=window.history.state._depth}J();function Be(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function $e(e,t){let n=!1;return()=>{const r=j;J();const s=r==null?null:j-r;if(n){n=!1;return}s&&t(s)?(n=!0,window.history.go(-s)):e()}}const me=/^(?:[a-z0-9]+:)?\/\//i,ge=/^\/+|(\/)\/+$/g,Te="http://sr";function y(e,t=!1){const n=e.replace(ge,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function L(e,t,n){if(me.test(t))return;const r=y(e),s=n&&y(n);let o="";return!s||t.startsWith("/")?o=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?o=r+s:o=s,(o||"/")+y(t,!o)}function Re(e,t){if(e==null)throw new Error(t);return e}function Se(e,t){return y(e).replace(/\/*(\*.*)?$/g,"")+y(t)}function Y(e){const t={};return e.searchParams.forEach((n,r)=>{t[r]=n}),t}function Ee(e,t,n){const[r,s]=e.split("/*",2),o=r.split("/").filter(Boolean),a=o.length;return i=>{const l=i.split("/").filter(Boolean),f=l.length-a;if(f<0||f>0&&s===void 0&&!t)return null;const h={path:a?"":"/",params:{}},g=d=>n===void 0?void 0:n[d];for(let d=0;d<a;d++){const p=o[d],_=p[0]===":",R=_?l[d]:l[d].toLowerCase(),O=_?p.slice(1):p.toLowerCase();if(_&&G(R,g(O)))h.params[O]=R;else if(_||!G(R,O))return null;h.path+=`/${R}`}if(s){const d=f?l.slice(-f).join("/"):"";if(G(d,g(s)))h.params[s]=d;else return null}return h}}function G(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Ie(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((s,o)=>s+(o.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Q(e){const t=new Map,n=ie();return new Proxy({},{get(r,s){return t.has(s)||H(n,()=>t.set(s,T(()=>e()[s]))),t.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function Oe(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([s,o])=>{o==null||o===""?n.delete(s):n.set(s,String(o))});const r=n.toString();return r?`?${r}`:""}function Z(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const s=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=t[1]),r=r.slice(t[0].length);return Z(r).reduce((o,a)=>[...o,...s.map(i=>i+a)],[])}const ve=100,we=X(),ee=X(),A=()=>Re(B(we),"<A> and 'use' router primitives can be only used inside a Route."),ye=()=>B(ee)||A().base,We=e=>{const t=ye();return T(()=>t.resolvePath(e()))},ke=e=>{const t=A();return T(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},Ae=()=>A().navigatorFactory(),Pe=()=>A().location,Ke=()=>A().params,He=()=>{const e=Pe(),t=Ae(),n=(r,s)=>{const o=q(()=>Oe(e.search,r)+e.hash);t(o,{scroll:!1,resolve:!1,...s})};return[e.query,n]};function Ve(e,t=""){const{component:n,preload:r,load:s,children:o,info:a}=e,i=!o||Array.isArray(o)&&!o.length,l={key:e,component:n,preload:r||s,info:a};return te(e.path).reduce((f,h)=>{for(const g of Z(h)){const d=Se(t,g);let p=i?d:d.split("/*",1)[0];p=p.split("/").map(_=>_.startsWith(":")||_.startsWith("*")?_:encodeURIComponent(_)).join("/"),f.push({...l,originalPath:h,pattern:p,matcher:Ee(p,!i,e.matchFilters)})}return f},[])}function De(e,t=0){return{routes:e,score:Ie(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let s=e.length-1;s>=0;s--){const o=e[s],a=o.matcher(n);if(!a)return null;r.unshift({...a,route:o})}return r}}}function te(e){return Array.isArray(e)?e:[e]}function Ue(e,t="",n=[],r=[]){const s=te(e);for(let o=0,a=s.length;o<a;o++){const i=s[o];if(i&&typeof i=="object"){i.hasOwnProperty("path")||(i.path="");const l=Ve(i,t);for(const f of l){n.push(f);const h=Array.isArray(i.children)&&i.children.length===0;if(i.children&&!h)Ue(i.children,f.pattern,n,r);else{const g=De([...n],r.length);r.push(g)}n.pop()}}}return n.length?r:r.sort((o,a)=>a.score-o.score)}function M(e,t){for(let n=0,r=e.length;n<r;n++){const s=e[n].matcher(t);if(s)return s}return[]}function xe(e,t){const n=new URL(Te),r=T(l=>{const f=e();try{return new URL(f,n)}catch{return console.error(`Invalid path ${f}`),l}},n,{equals:(l,f)=>l.href===f.href}),s=T(()=>r().pathname),o=T(()=>r().search,!0),a=T(()=>r().hash),i=()=>"";return{get pathname(){return s()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return i()},query:Q(z(o,()=>Y(r())))}}let S;function qe(){return S}let I=!1;function Xe(){return I}function ze(e){I=e}function Je(e,t,n,r={}){const{signal:[s,o],utils:a={}}=e,i=a.parsePath||(c=>c),l=a.renderPath||(c=>c),f=a.beforeLeave||_e(),h=L("",r.base||"");if(h===void 0)throw new Error(`${h} is not a valid base path`);h&&!s().value&&o({value:h,replace:!0,scroll:!1});const[g,d]=b(!1);let p;const _=(c,u)=>{u.value===R()&&u.state===P()||(p===void 0&&d(!0),S=c,p=u,le(()=>{p===u&&(O(p.value),ne(p.state),fe(),$[1]([]))}).finally(()=>{p===u&&he(()=>{S=void 0,c==="navigate"&&ae(p),d(!1),p=void 0})}))},[R,O]=b(s().value),[P,ne]=b(s().state),V=xe(R,P),D=[],$=b([]),W=T(()=>typeof r.transformUrl=="function"?M(t(),r.transformUrl(V.pathname)):M(t(),V.pathname)),re=Q(()=>{const c=W(),u={};for(let m=0;m<c.length;m++)Object.assign(u,c[m].params);return u}),k={pattern:h,path:()=>h,outlet:()=>null,resolvePath(c){return L(h,c)}};return ue(z(s,c=>_("native",c),{defer:!0})),{base:k,location:V,params:re,isRouting:g,renderPath:l,parsePath:i,navigatorFactory:oe,matches:W,beforeLeave:f,preloadRoute:ce,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:$};function se(c,u,m){q(()=>{if(typeof u=="number"){u&&(a.go?a.go(u):console.warn("Router integration does not support relative routing"));return}const U=!u||u[0]==="?",{replace:C,resolve:E,scroll:N,state:v}={replace:!1,resolve:!U,scroll:!0,...m};let Me;const x=E?c.resolvePath(u):L(U&&V.pathname||"",u);if(x===void 0)throw new Error(`Path '${u}' is not a routable path`);if(D.length>=ve)throw new Error("Too many redirects");const K=R();(x!==K||v!==P())&&(pe||f.confirm(x,m)&&(D.push({value:K,replace:C,scroll:N,state:P()}),_("navigate",{value:x,state:v})))})}function oe(c){return c=c||B(ee)||k,(u,m)=>se(c,u,m)}function ae(c){const u=D[0];u&&(o({...c,replace:u.replace,scroll:u.scroll}),D.length=0)}function ce(c,u={}){const m=M(t(),c.pathname),U=S;S="preload";for(let C in m){const{route:E,params:N}=m[C];E.component&&E.component.preload&&E.component.preload();const{preload:v}=E;I=!0,u.preloadData&&v&&H(n(),()=>v({params:N,location:{pathname:c.pathname,search:c.search,hash:c.hash,query:Y(c),state:null,key:""},intent:"preload"})),I=!1}S=U}}function Ye(e,t,n,r){const{base:s,location:o,params:a}=e,{pattern:i,component:l,preload:f}=r().route,h=T(()=>r().path);l&&l.preload&&l.preload(),I=!0;const g=f?f({params:a,location:o,intent:S||"initial"}):void 0;return I=!1,{parent:t,pattern:i,path:h,outlet:()=>l?de(l,{params:a,location:o,data:g,get children(){return n()}}):n(),resolvePath(p){return L(s.path(),p,h())}}}const be="VITE_STUDIO_",Le="https://api.allorigins.win/get?url=";async function Ce(e,t,n=!0){const r=await fetch(new URL(Le+e),t);if(!n)return r;let s=await r.json();return s.contents?JSON.parse(s.contents):s}async function Ne(e,t){const n=await Ce(e+t);if(n==null||!n.result)throw new TypeError("fetch result is empty");if(!n.succeed)throw new TypeError("failed to fetch");return n.result}function F(e,t){return new URL(t,e)}const w={BASE_URL:"/studiobrowser/_build",CWD:"D:\\Projects\\Javascript\\solid-csostudiobrowser",DEV:!1,DEVTOOLS:!1,MANIFEST:globalThis.MANIFEST,MODE:"production",PROD:!0,ROUTERS:["public","ssr","client","server-fns"],ROUTER_HANDLER:"src/entry-client.tsx",ROUTER_NAME:"client",ROUTER_TYPE:"client",SERVER_BASE_URL:"/studiobrowser",SSR:!1,START_APP:"./src/app.tsx",START_DEV_OVERLAY:!0,START_ISLANDS:!1,START_SSR:!0,VITE_CORS:"https://api.allorigins.win/get?url=",VITE_STUDIO:"kr,chn,tw,na",VITE_STUDIO_CHN:"ðŸ‡¨ðŸ‡³ Tiancity",VITE_STUDIO_CHN_API:"http://60.191.86.188:3002/",VITE_STUDIO_CHN_STORAGE:"http://ct01.csosandbox.tiancity.com/",VITE_STUDIO_CHN_STORAGE_VMG:"images/",VITE_STUDIO_CHN_STORAGE_VXL:"resources/",VITE_STUDIO_KR:"ðŸ‡°ðŸ‡· Nexon Korea",VITE_STUDIO_KR_API:"http://222.122.48.57:3000/",VITE_STUDIO_KR_STORAGE:"https://cso-studio-kr.dn.nexoncdn.co.kr/",VITE_STUDIO_KR_STORAGE_VMG:"images/",VITE_STUDIO_KR_STORAGE_VXL:"resources/",VITE_STUDIO_NA:"ðŸŒŽ Nexon America",VITE_STUDIO_NA_API:"http://52.28.231.59:3000/",VITE_STUDIO_NA_STORAGE:"https://d1u9da8nyooy18.cloudfront.net/",VITE_STUDIO_NA_STORAGE_VMG:"images_prod/",VITE_STUDIO_NA_STORAGE_VXL:"resources_prod/",VITE_STUDIO_TW:"ðŸ‡¹ðŸ‡¼ðŸ‡­ðŸ‡° Beanfun",VITE_STUDIO_TW_API:"http://112.121.65.212:3004/",VITE_STUDIO_TW_STORAGE:"https://studio-twcso.s3-ap-northeast-1.amazonaws.com/",VITE_STUDIO_TW_STORAGE_VMG:"images/",VITE_STUDIO_TW_STORAGE_VXL:"resources/"};function Ge(e){const t=be+e.toUpperCase(),n=w[t+"_API"],r=w[t+"_STORAGE"],s=w[t+"_STORAGE_VMG"],o=w[t+"_STORAGE_VXL"];return{id:e,name:w[t],api:async a=>Ne(n,a),storage:a=>F(r,a),vmg:a=>F(r,`${s}${a}.vmg`),vxl:a=>F(r,`${o}${a}.vxl`)}}function Qe(){const e=[];return"kr,chn,tw,na".split(",").forEach((n,r)=>{e[r]=Ge(n)}),e}export{we as R,Je as a,ee as b,Ue as c,Ye as d,J as e,_e as f,qe as g,Ge as h,Qe as i,He as j,Be as k,Ae as l,Te as m,$e as n,We as o,ke as p,Pe as q,y as r,ze as s,Xe as t,Ke as u};
