import{$ as h,v as K,w as C,x as ee,e as R,i as u,k as _,b as a,I as te,t as d,a as ne,y as re,q as D,h as se,E as oe,S as le,z as ie,M as T,r as ce,n as ae}from"./web-9koFeCQo.js";import{c as z,u as H}from"./index-default-CLtfLyKF.js";import{u as fe,j as ue,h as de}from"./region-iEmnAcDk.js";import{c as ge,a as $e}from"./slot-CwgCGEfS.js";import{c as he,P as be}from"./PageTitle-B7NmHrjN.js";import{S as _e}from"./SlotCard-Cr3CP2H4.js";import"./index-Bqep_clB.js";import"./preload-helper-C9euoRAu.js";const M=Symbol("store-raw"),y=Symbol("store-node"),f=Symbol("store-has"),W=Symbol("store-self");function G(e){let t=e[h];if(!t&&(Object.defineProperty(e,h,{value:t=new Proxy(e,we)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let s=0,o=n.length;s<o;s++){const l=n[s];r[l].get&&Object.defineProperty(e,l,{enumerable:r[l].enumerable,get:r[l].get.bind(t)})}}return t}function N(e){let t;return e!=null&&typeof e=="object"&&(e[h]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function O(e,t=new Set){let n,r,s,o;if(n=e!=null&&e[M])return n;if(!N(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let l=0,c=e.length;l<c;l++)s=e[l],(r=O(s,t))!==s&&(e[l]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const l=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let i=0,b=l.length;i<b;i++)o=l[i],!c[o].get&&(s=e[o],(r=O(s,t))!==s&&(e[o]=r))}return e}function x(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function P(e,t,n){if(e[t])return e[t];const[r,s]=R(n,{equals:!1,internal:!0});return r.$=s,e[t]=r}function ye(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===h||t===y||(delete n.value,delete n.writable,n.get=()=>e[h][t]),n}function Q(e){C()&&P(x(e,y),W)()}function Se(e){return Q(e),Reflect.ownKeys(e)}const we={get(e,t,n){if(t===M)return e;if(t===h)return n;if(t===K)return Q(e),n;const r=x(e,y),s=r[t];let o=s?s():e[t];if(t===y||t===f||t==="__proto__")return o;if(!s){const l=Object.getOwnPropertyDescriptor(e,t);C()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(l&&l.get)&&(o=P(r,t,o)())}return N(o)?G(o):o},has(e,t){return t===M||t===h||t===K||t===y||t===f||t==="__proto__"?!0:(C()&&P(x(e,f),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Se,getOwnPropertyDescriptor:ye};function E(e,t,n,r=!1){if(!r&&e[t]===n)return;const s=e[t],o=e.length;n===void 0?(delete e[t],e[f]&&e[f][t]&&s!==void 0&&e[f][t].$()):(e[t]=n,e[f]&&e[f][t]&&s===void 0&&e[f][t].$());let l=x(e,y),c;if((c=P(l,t,s))&&c.$(()=>n),Array.isArray(e)&&e.length!==o){for(let i=e.length;i<o;i++)(c=l[i])&&c.$();(c=P(l,"length",o))&&c.$(e.length)}(c=l[W])&&c.$()}function X(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const s=n[r];E(e,s,t[s])}}function Ae(e,t){if(typeof t=="function"&&(t=t(e)),t=O(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const s=t[n];e[n]!==s&&E(e,n,s)}E(e,"length",r)}else X(e,t)}function A(e,t,n=[]){let r,s=e;if(t.length>1){r=t.shift();const l=typeof r,c=Array.isArray(e);if(Array.isArray(r)){for(let i=0;i<r.length;i++)A(e,[r[i]].concat(t),n);return}else if(c&&l==="function"){for(let i=0;i<e.length;i++)r(e[i],i)&&A(e,[i].concat(t),n);return}else if(c&&l==="object"){const{from:i=0,to:b=e.length-1,by:L=1}=r;for(let g=i;g<=b;g+=L)A(e,[g].concat(t),n);return}else if(t.length>1){A(e[r],t,[r].concat(n));return}s=e[r],n=[r].concat(n)}let o=t[0];typeof o=="function"&&(o=o(s,n),o===s)||r===void 0&&o==null||(o=O(o),r===void 0||N(s)&&N(o)&&!Array.isArray(o)?X(s,o):E(e,r,o))}function Oe(...[e,t]){const n=O(e||{}),r=Array.isArray(n),s=G(n);function o(...l){ee(()=>{r&&l.length===1?Ae(n,l[0]):A(n,l)})}return[s,o]}var Pe=d("<div class=slot-grid>");function me(e){const t=e.slots;return(()=>{var n=u(Pe);return _(n,a(te,{each:t,children:r=>a(_e,{get slot(){return r()}})})),n})()}var ke=d("<span>Loading..."),pe=d("<span>No more data"),je=d("<div class=slot-list><!$><!/><button class=slot-list-load type=button>"),De=d("<main><!$><!/><!$><!/>"),Ne=d("<div>Loading..."),xe=d("<h3>error! <!$><!/>"),Ee=d("<span>Load more...");function Le(e,t){switch(t){case"nick":default:return n=>{const r=n.q;return delete n.q,$e(e,r,n)}}}const B=ge(async(e,t,n,r={all:!1})=>{n=z(n),delete n.cat;const s=Le(e,t);if(r.all){const o=parseInt(n.offset||"0");let l=[];for(let c=0;c<=o;c++){const i=z(n);c>0?i.offset=`${c}`:delete i.offset,l=H(l,await s(i))}return l}return await s(n)},"page_list");function ze(e){const t=fe(),[n,r]=ue(),s=ne(()=>de(t.region)),[o,l]=Oe([]),c=()=>!!o.length,i=()=>parseInt(n.offset||"0"),[b,L]=R(i()),[g,m]=R(0),F=he(async()=>{m(1);let $=0;if(!c())l(await B(s(),n.cat,n,{all:!0}));else if(b()<i()){const k=await B(s(),n.cat,n);k.length?(L(i()+1),l(H(o,k))):$=2}return m($),o}),Y=()=>{g()||(r({offset:b()+1},{replace:!0}),m(1))};return re(()=>{m(0)}),(()=>{var $=u(De),k=$.firstChild,[I,J]=D(k.nextSibling),U=I.nextSibling,[V,Z]=D(U.nextSibling);return _($,a(be,{children:"Studio Browser"}),I,J),_($,a(ae,{get fallback(){return u(Ne)},get children(){return a(oe,{fallback:S=>(()=>{var w=u(xe),p=w.firstChild,v=p.nextSibling,[j,q]=D(v.nextSibling);return _(w,()=>S.message,j,q),w})(),get children(){return a(le,{get when(){return F()},get children(){var S=u(je),w=S.firstChild,[p,v]=D(w.nextSibling),j=p.nextSibling;return _(S,a(me,{get slots(){return F()}}),p,v),j.$$click=Y,_(j,a(ie,{get fallback(){return u(Ee)},get children(){return[a(T,{get when(){return g()===1},get children(){return u(ke)}}),a(T,{get when(){return g()===2},get children(){return u(pe)}})]}})),ce(),S}})}})}}),V,Z),$})()}se(["click"]);export{ze as default};
