import{$ as h,v as K,w as C,x as Z,e as R,i as u,k as _,b as c,I as ee,t as g,a as te,y as ne,q as D,h as re,E as se,S as oe,z as ie,M as T,r as le,n as fe}from"./web-9koFeCQo.js";import{c as ce,u as B}from"./index-default-CLtfLyKF.js";import{u as ae,j as ue,h as ge}from"./region-iEmnAcDk.js";import{c as de,a as $e}from"./slot-CwgCGEfS.js";import{c as he,P as be}from"./PageTitle-B7NmHrjN.js";import{S as _e}from"./SlotCard-C2Kb3wXs.js";import"./index-Bqep_clB.js";import"./preload-helper-C9euoRAu.js";const M=Symbol("store-raw"),y=Symbol("store-node"),a=Symbol("store-has"),H=Symbol("store-self");function q(e){let t=e[h];if(!t&&(Object.defineProperty(e,h,{value:t=new Proxy(e,we)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let s=0,o=n.length;s<o;s++){const i=n[s];r[i].get&&Object.defineProperty(e,i,{enumerable:r[i].enumerable,get:r[i].get.bind(t)})}}return t}function N(e){let t;return e!=null&&typeof e=="object"&&(e[h]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function O(e,t=new Set){let n,r,s,o;if(n=e!=null&&e[M])return n;if(!N(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,f=e.length;i<f;i++)s=e[i],(r=O(s,t))!==s&&(e[i]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),f=Object.getOwnPropertyDescriptors(e);for(let l=0,b=i.length;l<b;l++)o=i[l],!f[o].get&&(s=e[o],(r=O(s,t))!==s&&(e[o]=r))}return e}function x(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function P(e,t,n){if(e[t])return e[t];const[r,s]=R(n,{equals:!1,internal:!0});return r.$=s,e[t]=r}function ye(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===h||t===y||(delete n.value,delete n.writable,n.get=()=>e[h][t]),n}function W(e){C()&&P(x(e,y),H)()}function Se(e){return W(e),Reflect.ownKeys(e)}const we={get(e,t,n){if(t===M)return e;if(t===h)return n;if(t===K)return W(e),n;const r=x(e,y),s=r[t];let o=s?s():e[t];if(t===y||t===a||t==="__proto__")return o;if(!s){const i=Object.getOwnPropertyDescriptor(e,t);C()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(o=P(r,t,o)())}return N(o)?q(o):o},has(e,t){return t===M||t===h||t===K||t===y||t===a||t==="__proto__"?!0:(C()&&P(x(e,a),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Se,getOwnPropertyDescriptor:ye};function E(e,t,n,r=!1){if(!r&&e[t]===n)return;const s=e[t],o=e.length;n===void 0?(delete e[t],e[a]&&e[a][t]&&s!==void 0&&e[a][t].$()):(e[t]=n,e[a]&&e[a][t]&&s===void 0&&e[a][t].$());let i=x(e,y),f;if((f=P(i,t,s))&&f.$(()=>n),Array.isArray(e)&&e.length!==o){for(let l=e.length;l<o;l++)(f=i[l])&&f.$();(f=P(i,"length",o))&&f.$(e.length)}(f=i[H])&&f.$()}function G(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const s=n[r];E(e,s,t[s])}}function Ae(e,t){if(typeof t=="function"&&(t=t(e)),t=O(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const s=t[n];e[n]!==s&&E(e,n,s)}E(e,"length",r)}else G(e,t)}function A(e,t,n=[]){let r,s=e;if(t.length>1){r=t.shift();const i=typeof r,f=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)A(e,[r[l]].concat(t),n);return}else if(f&&i==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&A(e,[l].concat(t),n);return}else if(f&&i==="object"){const{from:l=0,to:b=e.length-1,by:L=1}=r;for(let d=l;d<=b;d+=L)A(e,[d].concat(t),n);return}else if(t.length>1){A(e[r],t,[r].concat(n));return}s=e[r],n=[r].concat(n)}let o=t[0];typeof o=="function"&&(o=o(s,n),o===s)||r===void 0&&o==null||(o=O(o),r===void 0||N(s)&&N(o)&&!Array.isArray(o)?G(s,o):E(e,r,o))}function Oe(...[e,t]){const n=O(e||{}),r=Array.isArray(n),s=q(n);function o(...i){Z(()=>{r&&i.length===1?Ae(n,i[0]):A(n,i)})}return[s,o]}var Pe=g("<div class=slot-grid>");function me(e){const t=e.slots;return(()=>{var n=u(Pe);return _(n,c(ee,{each:t,children:r=>c(_e,{get slot(){return r()}})})),n})()}var ke=g("<span>Loading..."),pe=g("<span>No more data"),je=g("<div class=slot-list><!$><!/><button class=slot-list-load type=button>"),De=g("<main><!$><!/><!$><!/>"),Ne=g("<div>Loading..."),xe=g("<h3>error! <!$><!/>"),Ee=g("<span>Load more...");function Le(e,t){switch(t){case"nick":default:return n=>$e(e,n?.q||t,n)}}const z=de(async(e,t,n,r={all:!1})=>{const s=Le(e,t);if(r.all){const o=parseInt(n.offset||"0");let i=[];for(let f=0;f<=o;f++){const l=ce(n);f>0?l.offset=`${f}`:delete l.offset,i=B(i,await s(l))}return i}return await s(n)},"page_list");function ze(e){const t=ae(),[n,r]=ue(),s=te(()=>ge(t.region)),[o,i]=Oe([]),f=()=>!!o.length,l=()=>parseInt(n.offset||"0"),[b,L]=R(l()),[d,m]=R(0),F=he(async()=>{m(1);let $=0;if(!f())i(await z(s(),t.list,n,{all:!0}));else if(b()<l()){const k=await z(s(),t.list,n);k.length?(L(l()+1),i(B(o,k))):$=2}return m($),o}),Q=()=>{d()||(r({offset:b()+1},{replace:!0}),m(1))};return ne(()=>{m(0)}),(()=>{var $=u(De),k=$.firstChild,[I,X]=D(k.nextSibling),Y=I.nextSibling,[J,U]=D(Y.nextSibling);return _($,c(be,{children:"Studio Browser"}),I,X),_($,c(fe,{get fallback(){return u(Ne)},get children(){return c(se,{fallback:S=>(()=>{var w=u(xe),p=w.firstChild,v=p.nextSibling,[j,V]=D(v.nextSibling);return _(w,()=>S.message,j,V),w})(),get children(){return c(oe,{get when(){return F()},get children(){var S=u(je),w=S.firstChild,[p,v]=D(w.nextSibling),j=p.nextSibling;return _(S,c(me,{get slots(){return F()}}),p,v),j.$$click=Q,_(j,c(ie,{get fallback(){return u(Ee)},get children(){return[c(T,{get when(){return d()===1},get children(){return u(ke)}}),c(T,{get when(){return d()===2},get children(){return u(pe)}})]}})),le(),S}})}})}}),J,U),$})()}re(["click"]);export{ze as default};
